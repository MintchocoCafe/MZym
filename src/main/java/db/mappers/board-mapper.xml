<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<!-- 
	작성자 : 이예찬
	페이징 처리가 된 공지사항을 최신순으로 정렬해서 가져오는 쿼리문
 -->
<entry key="selectNotice">
select *
from(
    select ROWNUM r , n.* 
    from(
        select
            NOTICE_NO
            , User_ID
            , NOTICE_TITLE
            , NOTICE_CONTENT
            , TO_CHAR(n.REGIST_DATE, 'YY"년"MM"월"DD"일"') REGIST_DATE
            , origin_name
            , change_name
            , file_path
        from MZYM_NOTICE n
        join mzym_member on (user_no = notice_writer)
        left join attachment a 
        on (a.status = 'Y' 
        and ATT_CATEGORY ='N' 
        and a.att_no = n.notice_no)
        where n.status = 'Y' 
        order by NOTICE_NO DESC 
    )n
)
where r BETWEEN ? and ?
</entry>
	
<!-- 
	작성자: 이예찬
	페이징처리 위한 공지사항의 총 갯수를 알라오기 위한 쿼리문
-->
<entry key="selectNoticeCount">
select count(*)
from mzym_notice
</entry>

<!-- 
	작성자 : 이예찬
	"공지사항" 등록 쿼리
	 작성자의 회원 번호, 공지사항 제목, 공지사항 내용 필요
	단, 첨부파일보다 먼저 등록되어야함
 -->
<entry key="insertNotice">
insert 
into mzym_notice(
    NOTICE_NO
    , NOTICE_WRITER
    , NOTICE_TITLE
    , NOTICE_CONTENT
    , REGIST_DATE
    , EDIT_DATE
    , START_DATE
    , STATUS
) values(
    SEQ_NOTICENO.nextval
    , ? <!-- ? 작성자 즉, 세션값의 트레이너 정보필요 -->
    , ? <!-- 제목 -->
    , ? <!-- 내용 -->
    , sysdate
    , sysdate
    , sysdate
    , default
)
</entry>

<!-- 
	작성자 : 이예찬
	"공지사항" 등록시 첨부파일 등록 쿼리문
	카테고리 
	원본명, 수정명, 경로 ,
	후기부분에서만 FILE_LEVEL(이미지 구분) 사용 하기고 나머지는 null 넣으면 됩니다.
 -->
<entry key="insertNumAttachment">
insert 
into attachment
(
    FILE_NO
    , ATT_NO
    , ATT_CATEGORY
    , ORIGIN_NAME
    , CHANGE_NAME
    , FILE_PATH
    , UPLORD_DATE
    , FILE_LEVEL
    , STATUS
) values (
    SEQ_ATTACHMENT.nextval
    , ?
    , ? 
    , ? 
    , ? 
    , ? 
    , sysdate
    , ? 
    , DEFAULT
)

</entry>

<!-- 
	작성자 : 이예찬
	공지사항 수정시 쿼리 
 -->
<entry key="updateNotice">
update mzym_Notice
set notice_Title = ? <!-- 공지사항 제목 -->
   , notice_content = ? <!-- 공지사항 내용 -->
   , Edit_date = sysdate 
   , notice_writer = ? <!-- 변경한 작성자 -->
where notice_no = ? <!-- 해당 공지사항 -->
</entry>


<!-- 
작성자 : 황수림
페이징 처리 위한 자유게시판 갯수 가져오는 쿼리
 -->
<entry key="selectFreeListCount">
	SELECT	COUNT(*) COUNT
	FROM	MZYM_BOARD
	WHERE	BOARD_TYPE = 1
	AND		STATUS = 'Y'
</entry>
<!-- 
	작성자 : 이예찬
	해당 글번호의 첨부파일이 수정 되었을때 
 -->
<entry key="updateAttachment">
update attachment
set origin_name = ?
,    change_name= ?
,    UPLORD_DATE = sysdate
where att_no = ?
</entry>

<!-- 
	작성자 : 황수림
	자유게시판 글 목록 리스트 셀렉문
 -->
<entry key="selectFreeList">
	SELECT *
	    FROM (
	            SELECT ROWNUM RNUM, A.*
	                FROM (
	                        SELECT
	                            BOARD_NO
	                            , BOARD_TITLE
	                            , USER_NAME
	                            , COUNT
	                            , REGIST_DATE
	                        FROM
	                            MZYM_BOARD B
	                        JOIN
	                            MZYM_MEMBER ON (BOARD_WRITER = USER_NO)
	                        WHERE
	                            BOARD_TYPE = 1
	                        AND
	                            B.STATUS = 'Y'
	                        ORDER
	                            BY BOARD_NO DESC
	                    ) A
	        )
	WHERE RNUM BETWEEN ? AND ?
</entry>

<!--
	작성자 : 황수림
	자유게시판 게시글 insert문
 -->
<entry key="insertFreeBoard">
	INSERT
	INTO MZYM_BOARD
	(
		BOARD_NO
	,	BOARD_WRITER
	,	BOARD_TYPE
	,	BOARD_TITLE
	,	BOARD_CONTENT
	)
	VALUES
	(
		SEQ_BOARDNO.NEXTVAL
	,	?
	,	1
	,	?
	,	?	
	)
</entry>

<!--
	작성자 : 황수림
	자유게시판 첨부파일 insert문
 -->
<entry key="insertFreeAttachment">
	INSERT
	INTO ATTACHMENT
	(
		FILE_NO
	,	ATT_NO
	,	ATT_CATEGORY
	,	ORIGIN_NAME
	,	CHANGE_NAME
	,	FILE_PATH
	)
	VALUES
	(
		SEQ_ATTACHMENT.NEXTVAL
	,	SEQ_BOARDNO.CURRVAL
	,	'B'
	,	?
	,	?
	,	?
	)
</entry>
<!--  -->
<entry key=""></entry>
<!--  -->
<entry key=""></entry>
<!--  -->
<entry key=""></entry>
<!--  -->
<entry key=""></entry>
<!--  -->
<entry key=""></entry>
<!--  -->
<entry key=""></entry>
</properties>